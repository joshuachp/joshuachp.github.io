0:[[["",{"children":["posts",{"children":[["path","2023-02-28_goatcounter_analytics","d"],{"children":["__PAGE__?{\"path\":\"2023-02-28_goatcounter_analytics\"}",{}]}]}]},"$undefined","$undefined",true],"$L1","$L2"]]
2:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"/dev/blog - /dev/blog - GoatCounter Analytics for NextJS"}],["$","meta",null,{"name":"description","content":"GoatCounter Analytics is a privacy-friendly web analytics tool perfect for small websites like blogs. It is free and open source."}],["$","meta",null,{"name":"application-name","content":"/dev/blog"}],null,null,["$","meta",null,{"name":"generator","content":"Next.js"}],["$","meta",null,{"name":"keywords","content":"Dev,Blog,Programmings"}],["$","meta",null,{"name":"referrer","content":"origin-when-cross-origin"}],[["$","meta",null,{"name":"theme-color","content":"amber"}]],["$","meta",null,{"name":"color-scheme","content":"dark"}],["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta",null,{"name":"creator","content":"Joshua Chapman"}],null,null,null,null,null,null,null,null,null,[]],[["$","link",null,{"rel":"canonical","href":"https://joshuachp.dev/posts/2023-02-28_goatcounter_analytics"}],null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.svg","type":"image/svg+xml"}],["$","link",null,{"rel":"icon","href":"/favicon.png","type":"image/png"}],["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon"}]],[],null]]
1:["$L3",null,null,[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/816f3edd0640ecf0.css","precedence":"next.js"}]]]
4:I{"id":"5376","name":"","chunks":["619:619-c19bc287cf902553","185:app/layout-846cebac6a604397"],"async":false}
5:I{"id":"6722","name":"","chunks":["619:619-c19bc287cf902553","185:app/layout-846cebac6a604397"],"async":false}
6:I{"id":"9299","name":"","chunks":["619:619-c19bc287cf902553","185:app/layout-846cebac6a604397"],"async":false}
7:I{"id":"5019","name":"","chunks":["619:619-c19bc287cf902553","185:app/layout-846cebac6a604397"],"async":false}
8:I{"id":"1300","name":"","chunks":["272:webpack-e24f1f8cbee90348","667:2443530c-665140932b5be2c8","961:961-3c1bc6d2264a2786"],"async":false}
9:I{"id":"6022","name":"","chunks":["272:webpack-e24f1f8cbee90348","667:2443530c-665140932b5be2c8","961:961-3c1bc6d2264a2786"],"async":false}
3:["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","$L4",null,{"production":true,"goatCounterApi":"a7d98e3f-b56b"}],["$","$L5",null,{"id":"dark-theme","strategy":"beforeInteractive","children":"if(localStorage.theme==='Dark'||((!('theme'in localStorage)||localStorage.theme==='Auto')&&window.matchMedia('(prefers-color-scheme: dark)').matches)){document.documentElement.classList.add('dark')}"}]]}],["$","body",null,{"className":"bg-primary-50 dark:bg-primary-900","children":["$","$L6",null,{"children":[["$","$L7",null,{}],["$","main",null,{"className":"flex flex-col justify-center p-6 sm:px-12 md:px-24 lg:px-48 xl:px-60 2xl:px-96","children":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["path","2023-02-28_goatcounter_analytics","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$La",null,null,[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/2a1840b1c557e13c.css","precedence":"next.js"}]]],"segment":"__PAGE__?{\"path\":\"2023-02-28_goatcounter_analytics\"}"}}],"segment":["path","2023-02-28_goatcounter_analytics","d"]}}],"segment":"posts"}}]}]]}]}]]}]
b:I{"id":"3619","name":"","chunks":["619:619-c19bc287cf902553","991:app/posts/page-1a3a1ea8f9cace6a"],"async":false}
c:I{"id":"7876","name":"","chunks":["619:619-c19bc287cf902553","563:app/posts/[path]/page-5c216433f9e2403e"],"async":false}
a:["$","article",null,{"className":"flex max-w-full grow flex-col justify-self-start","children":[["$","h1",null,{"className":"mb-4 text-primary-900 dark:text-primary-50 text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl","children":[["$","span","1",{"children":"GoatCounter Analytics for NextJS"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","4",{"children":"GoatCounter Analytics is a privacy-friendly web analytics tool perfect for"}],"\r\n",["$","span","6",{"children":"small websites like blogs. It is free and open source, and it also has a self"}],"\r\n",["$","span","8",{"children":"hosted option."}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","11",{"children":"I started using it in this blog, to see how a better understanding the traffic,"}],"\r\n",["$","span","13",{"children":"while still being privacy-friendly. Before, I was using the panel provided by"}],"\r\n",["$","span","15",{"children":"Cloudflare, which is also a good option. But it didn"}],["$","span","16",{"children":"’"}],["$","span","17",{"children":"t provide me with enough"}],"\r\n",["$","span","19",{"children":"information like the number of page views per page or article or the"}],"\r\n",["$","$Lb",null,{"title":"","className":"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600","href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer","children":[["$","span","22",{"children":"Referrer"}]]}],"\r\n",["$","span","25",{"children":"information."}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","img","30",{"src":"/images/2023-02-28/goatcounter.png","alt":""}]]}],["$","h2",null,{"className":"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl","children":[["$","span","33",{"children":"Why Use GoatCounter Analytics?"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","36",{"children":"Privacy is a growing concern on the web, and more and more users are becoming"}],"\r\n",["$","span","38",{"children":"aware of the importance of protecting their online data. GoatCounter is a great"}],"\r\n",["$","span","40",{"children":"solution for website owners who want to respect their users"}],["$","span","41",{"children":"’"}],["$","span","42",{"children":" privacy while"}],"\r\n",["$","span","44",{"children":"still gathering useful data about their website traffic. It is a simple and"}],"\r\n",["$","span","46",{"children":"lightweight tool that provides essential data like page views, referrer"}],"\r\n",["$","span","48",{"children":"information, and more, without tracking any personal data or using cookies."}]]}],["$","h2",null,{"className":"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl","children":[["$","span","51",{"children":"Getting Started with GoatCounter Analytics"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","54",{"children":"To use GoatCounter Analytics, the first thing you need to do is to create an"}],"\r\n",["$","span","56",{"children":"account on the GoatCounter website for your site. Once you have created an"}],"\r\n",["$","span","58",{"children":"account, GoatCounter will provide you with a script tag that you need to add to"}],"\r\n",["$","span","60",{"children":"your website."}]]}],["$","$Lc","64",{"language":"html","className":"mb-4 mt-2","children":[["$","span","63",{"children":"<script\n  data-goatcounter=\"https://example.goatcounter.com/count\"\n  async\n  src=\"//gc.zgo.at/count.js\"\n></script>\n"}]]}],["$","h2",null,{"className":"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl","children":[["$","span","66",{"children":"Integrating GoatCounter with NextJS"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","69",{"children":"To integrate GoatCounter with your NextJS website, you"}],["$","span","70",{"children":"’"}],["$","span","71",{"children":"ll need to add a script"}],"\r\n",["$","span","73",{"children":"tag to your "}],["$","code",null,{"className":" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg","children":"_app.tsx"}],["$","span","75",{"children":" file, which will ensure that the script is loaded on"}],"\r\n",["$","span","77",{"children":"every page. It"}],["$","span","78",{"children":"’"}],["$","span","79",{"children":"s essential to use the "}],["$","code",null,{"className":" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg","children":"afterInteractive"}],["$","span","81",{"children":" strategy to avoid"}],"\r\n",["$","span","83",{"children":"impacting page load performance. Additionally, you"}],["$","span","84",{"children":"’"}],["$","span","85",{"children":"ll need to hook up with the"}],"\r\n",["$","span","87",{"children":"router events to send page changes to GoatCounte."}]]}],["$","ol",null,{"start":1,"className":"mb-4 mt-2 ml-6 text-primary-900 dark:text-primary-50 text-sm sm:text-base xl:text-lg list-decimal","children":[["$","li","123",{"className":"mb-2","children":[["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","92",{"children":"Add the GoatCounter script tag to your pages/"}],["$","span","93",{"children":"_app.tsx file:"}]]}],["$","$Lc","109",{"language":"jsx","className":"mb-4 mt-2","children":[["$","span","96",{"children":"// pages/_app.tsx\n"}],["$","span","97",{"children":"function MyApp({ Component, pageProps }) {\n"}],["$","span","98",{"children":"  return (\n"}],["$","span","99",{"children":"    <>\n"}],["$","span","100",{"children":"      <Script\n"}],["$","span","101",{"children":"        strategy=\"afterInteractive\"\n"}],["$","span","102",{"children":"        data-goatcounter={`https://${API}.goatcounter.com/count`}\n"}],["$","span","103",{"children":"        src=\"//gc.zgo.at/count.js\"\n"}],["$","span","104",{"children":"      ></Script>\n"}],["$","span","105",{"children":"      <Component {...pageProps} />\n"}],["$","span","106",{"children":"    </>\n"}],["$","span","107",{"children":"  );\n"}],["$","span","108",{"children":"}\n"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","111",{"children":"Remember to put the script "}],["$","strong","114",{"children":[["$","span","113",{"children":"outside"}]]}],["$","span","115",{"children":" the "}],["$","code",null,{"className":" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg","children":"Header"}],["$","span","117",{"children":" component, otherwise it"}],"\r\n",["$","span","119",{"children":"won"}],["$","span","120",{"children":"’"}],["$","span","121",{"children":"t work and the script will not be loaded correctly."}]]}]]}],["$","li","136",{"className":"mb-2","children":[["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","126",{"children":"The script will add a magic pixel on the first load, which will phone home"}],"\r\n",["$","span","128",{"children":"to the GoatCounter server and registered the visit. But it won"}],["$","span","129",{"children":"’"}],["$","span","130",{"children":"t work for"}],"\r\n",["$","span","132",{"children":"the rest of the of the page views since NextJS is a SPA. So we need to hook"}],"\r\n",["$","span","134",{"children":"up to the router events to send the page views to GoatCounter."}]]}]]}],["$","li","177",{"className":"mb-2","children":[["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","139",{"children":"Now you need to register a event listener to the router, so when the page"}],"\r\n",["$","span","141",{"children":"changes we"}],["$","span","142",{"children":"’"}],["$","span","143",{"children":"ll send the information to the GoatCounter server. To do that,"}],"\r\n",["$","span","145",{"children":"we"}],["$","span","146",{"children":"’"}],["$","span","147",{"children":"ll use the "}],["$","code",null,{"className":" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg","children":"useRouter"}],["$","span","149",{"children":":"}]]}],["$","$Lc","169",{"language":"jsx","className":"mb-4 mt-2","children":[["$","span","152",{"children":"import { useEffect } from \"react\";\n"}],["$","span","153",{"children":"import { useRouter } from \"next/router\";\n\n"}],["$","span","154",{"children":"export default function MyApp({ Component, pageProps }) {\n"}],["$","span","155",{"children":"  const router = useRouter();\n\n"}],["$","span","156",{"children":"  useEffect(() => {\n"}],["$","span","157",{"children":"    const handleRouteChange = (url) => {\n"}],["$","span","158",{"children":"      window.goatcounter.count({\n"}],["$","span","159",{"children":"        path: url,\n"}],["$","span","160",{"children":"      });\n"}],["$","span","161",{"children":"    };\n\n"}],["$","span","162",{"children":"    router.events.on(\"routeChangeComplete\", handleRouteChange);\n\n"}],["$","span","163",{"children":"    return () => {\n"}],["$","span","164",{"children":"      router.events.off(\"routeChangeComplete\", handleRouteChange);\n"}],["$","span","165",{"children":"    };\n"}],["$","span","166",{"children":"  }, []);\n\n"}],["$","span","167",{"children":"  return <Component {...pageProps} />;\n"}],["$","span","168",{"children":"}\n"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","171",{"children":"We use the "}],["$","code",null,{"className":" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg","children":"useEffect"}],["$","span","173",{"children":" to add the event listener only once, and we remove it"}],"\r\n",["$","span","175",{"children":"when the component is unmounted."}]]}]]}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","180",{"children":"Now you can go to your GoatCounter dashboard and see the page views. You can"}],"\r\n",["$","span","182",{"children":"also see the referrer information, which is very useful to see where your"}],"\r\n",["$","span","184",{"children":"traffic is coming from."}]]}],["$","h2",null,{"className":"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl","children":[["$","span","187",{"children":"Conclusion"}]]}],["$","p",null,{"className":"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg","children":[["$","span","190",{"children":"GoatCounter is a privacy-friendly analytics tool that provides useful data"}],"\r\n",["$","span","192",{"children":"about website traffic without tracking any personal data. By following the"}],"\r\n",["$","span","194",{"children":"steps outlined in this article, you can integrate GoatCounter Analytics with"}],"\r\n",["$","span","196",{"children":"your NextJS web application and start gathering useful data about your website"}],"\r\n",["$","span","198",{"children":"traffic while respecting your users"}],["$","span","199",{"children":"’"}],["$","span","200",{"children":" privacy."}]]}]]}]
