<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/816f3edd0640ecf0.css" data-precedence="next.js"/><link rel="stylesheet" href="/_next/static/css/2a1840b1c557e13c.css" data-precedence="next.js"/><link rel="preload" as="script" href="//gc.zgo.at/count.js"/><title>/dev/blog - /dev/blog - CORS Laravel</title><meta name="description" content="Implementation of a simple CORS middleware for Laravel Php framework"/><meta name="application-name" content="/dev/blog"/><meta name="generator" content="Next.js"/><meta name="keywords" content="Dev,Blog,Programmings"/><meta name="referrer" content="origin-when-cross-origin"/><meta name="theme-color" content="amber"/><meta name="color-scheme" content="dark"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="creator" content="Joshua Chapman"/><link rel="canonical" href="https://joshuachp.dev/posts/2019-10-02_cors_laravel"/><link rel="icon" href="/favicon.svg" type="image/svg+xml"/><link rel="icon" href="/favicon.png" type="image/png"/><link rel="icon" href="/favicon.ico" type="image/x-icon"/><script>(self.__next_s=self.__next_s||[]).push([0,{"children":"if(localStorage.theme==='Dark'||((!('theme'in localStorage)||localStorage.theme==='Auto')&&window.matchMedia('(prefers-color-scheme: dark)').matches)){document.documentElement.classList.add('dark')}"}])</script><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" nomodule=""></script></head><body class="bg-primary-50 dark:bg-primary-900"><header class="flex flex-row items-baseline justify-between gap-4 p-6 sm:px-12 md:px-24 lg:px-48 xl:px-60 2xl:px-96"><nav class="flex flex-grow flex-row flex-wrap gap-y-4"><a title="Home page" class="mr-8" href="/"><h1 class=" text-primary-900 dark:text-primary-50 text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl">/dev/blog</h1></a><ul class="flex flex-grow flex-row items-end justify-start gap-8"><li><a title="Posts" href="/posts"><span class="text-xl md:text-2xl text-primary-900 dark:text-primary-50 underline font-bold">Posts</span></a></li><li><a title="Notes" href="/notes"><span class="text-xl md:text-2xl text-primary-900 dark:text-primary-50  font-bold">Notes</span></a></li></ul></nav><div><button class="rounded border-t-2 border-l-2 border-r-4 border-b-4  border-primary-900 px-4 py-2 text-sm font-medium text-primary-900  hover:bg-primary-100 active:translate-y-0.5 dark:border-primary-50 dark:text-primary-50 dark:hover:bg-primary-800 "><span class="text-sm sm:text-base xl:text-lg text-primary-900 dark:text-primary-50 font-semibold">Auto</span></button></div></header><main class="flex flex-col justify-center p-6 sm:px-12 md:px-24 lg:px-48 xl:px-60 2xl:px-96"><article class="flex max-w-full grow flex-col justify-self-start"><h1 class="mb-4 text-primary-900 dark:text-primary-50 text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl"><span>CORS Laravel</span></h1><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>I want to talk about the problems that I have encountered setting up CORS</span>
<span>between a Laravel backend server and a simple Html frontend hosted on a</span>
<span>different domain, using the fetch API.</span></p><h2 class="mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl"><span>What is CORS</span></h2><blockquote><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><strong><span>Cross-Origin Resource Sharing (CORS)</span></strong><span> is a mechanism that uses HTTP</span>
<span>headers to tell browsers to give a web application running at one origin,</span>
<span>access to selected resources from a different origin. A web application</span>
<span>executes a cross-origin HTTP request when it requests a resource that has a</span>
<span>different origin (domain, protocol, or port) from its own.</span></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg">&lt;cite&gt;<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://developer.mozilla.org/docs/Web/HTTP/CORS"><span>MDN Web docs</span></a>&lt;/cite&gt;</p></blockquote><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>An example is having a backend server in a domain different from the frontend.</span></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>Eg. </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">example.com admin.example.com</code></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>The browsers will block all the requests cross-domain and throw an error. This</span>
<span>issue is also present in development because the server and frontend must be</span>
<span>hosted on different ports (Like </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">localhost:8080</code><span> and </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">localhost:8000</code><span>).</span></p><h2 class="mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl"><span>Implementation</span></h2><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>The best place to read the implementation of CORS is</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://developer.mozilla.org/docs/Web/HTTP/CORS"><span>MDN Web Docs</span></a><span>. Most of the</span>
<span>setup on the frontend is already done by </span><strong><span>fetch</span></strong><span>. The first step in the CORS</span>
<span>mechanism is a </span><strong><span>Preflighted request</span></strong><span>.</span></p><h3 class="mb-4 text-primary-900 dark:text-primary-50 text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl"><span>Preflighted request</span></h3><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>The </span><strong><span>Preflighted request</span></strong><span> is an </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">OPTIONS</code><span> request that checks if the backend</span>
<span>server understands the necessary headers.</span></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>The headers are:</span></p><ul class="mb-4 mt-2 ml-6 text-primary-900 dark:text-primary-50 text-sm sm:text-base xl:text-lg list-disc"><li class="mb-2"><span>Access-Control-Request-Method</span></li><li class="mb-2"><span>Access-Control-Request-Headers</span></li><li class="mb-2"><span>Origin</span></li></ul><h4 class="mb-4 text-primary-900 dark:text-primary-50 text-xl font-semibold tracking-tight sm:text-2xl md:text-3xl"><span>Request</span></h4><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>I needed to make an Ajax </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">POST</code><span> request for some resources. I would send and</span>
<span>receive data in json format. The preflighted request would look something like</span>
<span>this:</span></p><pre class="language-http mb-4 mt-2 overflow-auto rounded border-2 border-primary-900 p-4 dark:border-primary-50"><code><span>GET /data/ HTTP/1.1
Host: admin.example.com
User-Agent: Mozilla/5.0 (...) Gecko/20100101 Firefox
Accept: */*
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip,deflate
Connection: keep-alive
Origin: https://example.com
</span></code></pre><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>With the fetch API</span></p><pre class="language-javascript mb-4 mt-2 overflow-auto rounded border-2 border-primary-900 p-4 dark:border-primary-50"><code><span>fetch.ajax(&#x27;admin.example.com&#x27;, {
        method: &#x27;POST&#x27;,
        mode: &#x27;cors&#x27;,
        body: JSON.stringify({
            data: &#x27;data&#x27;,
        });
</span></code></pre><h3 class="mb-4 text-primary-900 dark:text-primary-50 text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl"><span>Laravel API</span></h3><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>On the API side on Laravel we need to use a Middleware to intercept the</span>
<code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">OPTION</code><span> request and add the necessary headers:</span></p><ul class="mb-4 mt-2 ml-6 text-primary-900 dark:text-primary-50 text-sm sm:text-base xl:text-lg list-disc"><li class="mb-2"><span>Access-Control-Allow-Origin</span></li><li class="mb-2"><span>Access-Control-Allow-Methods</span></li><li class="mb-2"><span>Access-Control-Allow-Headers</span></li></ul><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>We can do it two ways. Using a custom Middleware created on your own, for</span>
<span>simple testing, or the more complete plugin</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://github.com/barryvdh/laravel-cors"><span>barryvdh/laravel-cors</span></a></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>You can find the implementation of the custom Middleware in this</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://stackoverflow.com/a/33090515"><span>Stack Overflow answer</span></a><span>. The code is:</span></p><pre class="language-php mb-4 mt-2 overflow-auto rounded border-2 border-primary-900 p-4 dark:border-primary-50"><code><span>&lt;?php namespace App\Http\Middleware;

use Closure;

class CORS {

    /**
     * Handle an incoming request.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Closure  $next
     * @return mixed
     */
    public function handle($request, Closure $next)
    {

        header(&quot;Access-Control-Allow-Origin: *&quot;);

        // ALLOW OPTIONS METHOD
        $headers = [
            &#x27;Access-Control-Allow-Methods&#x27;=&gt; &#x27;POST, GET, OPTIONS, PUT, DELETE&#x27;,
            &#x27;Access-Control-Allow-Headers&#x27;=&gt; &#x27;Content-Type, X-Auth-Token, Origin&#x27;
        ];
        if($request-&gt;getMethod() == &quot;OPTIONS&quot;) {
            // The client-side application can set headers allowed in Access-Control-Allow-Headers
            return Response::make(&#x27;OK&#x27;, 200, $headers);
        }

        $response = $next($request);
        foreach($headers as $key =&gt; $value)
            $response-&gt;header($key, $value);
        return $response;
    }
}
</span></code></pre><h2 class="mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl"><span>Issue</span></h2><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>After adding the Middleware I had still issues with the browser blocking the</span>
<span>request. The response to the Preflighted Request had a 200 Status Code, but no</span>
<span>CORS headers. After some digging, I found out that Laravel returns an html page</span>
<span>if you don</span><span>’</span><span>t specify a return type </span><code class=" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg">Accept-Content: application/json</code><span> in the</span>
<span>request and it will result in a 302 redirect to the page which will blocked by</span>
<span>default from the browser. So in the fetch function, we need to add the request</span>
<span>and response content-type headers:</span></p><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>With the fetch API</span></p><pre class="language-javascript mb-4 mt-2 overflow-auto rounded border-2 border-primary-900 p-4 dark:border-primary-50"><code><span>fetch.ajax(&quot;admin.example.com&quot;, {
    method: &quot;POST&quot;,
    mode: &quot;cors&quot;,
    headers: {
        Accept: &quot;application/json&quot;,
        &quot;Content-Type&quot;: &quot;application/json&quot;
    },;:
    body: JSON.stringify({
        data: &quot;data&quot;
    })
});
</span></code></pre><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>An alternative would be to use a different package like</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://github.com/axios/axios"><span>axios</span></a><span> that automatically sets the header for</span>
<span>the content-type and</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest"><span>XMLHttpRequest</span></a>
<span>for Laravel to recognize the request as ajax.</span></p><h2 class="mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl"><span>Conclusion</span></h2><p class="mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg"><span>In conclusion, I suggest the use of the plug-in</span>
<a title="" class="font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600" href="https://github.com/barryvdh/laravel-cors"><span>barryvdh/laravel-cors</span></a><span> for the best</span>
<span>configuration and features.</span></p></article></main><script src="/_next/static/chunks/webpack-e24f1f8cbee90348.js" async=""></script><script src="/_next/static/chunks/2443530c-65ca4daeaf429502.js" async=""></script><script src="/_next/static/chunks/961-409d5e344dd5ce3d.js" async=""></script><script src="/_next/static/chunks/main-app-25e72bd3924c7fd2.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"0:\"$L1\"\n"])</script><script>self.__next_f.push([1,"2:I{\"id\":\"8462\",\"name\":\"\",\"chunks\":[\"272:webpack-e24f1f8cbee90348\",\"667:2443530c-65ca4daeaf429502\",\"961:961-409d5e344dd5ce3d\"],\"async\":false}\n4:I{\"id\":\"9178\",\"name\":\"\",\"chunks\":[\"272:webpack-e24f1f8cbee90348\",\"667:2443530c-65ca4daeaf429502\",\"961:961-409d5e344dd5ce3d\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"1:[\"$\",\"$L2\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/2019-10-02_cors_laravel\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"path\",\"2019-10-02_cors_laravel\",\"d\"],{\"children\":[\"__PAGE__?{\\\"path\\\":\\\"2019-10-02_cors_laravel\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L3\",\"globalErrorComponent\":\"$4\",\"notFound\":\"$L5\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"children\":[\"$L6\",null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/816f3edd0640ecf0.css\",\"precedence\":\"next.js\"}]]]}]\n"])</script><script>self.__next_f.push([1,"7:I{\"id\":\"5376\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"185:app/layout-4b8fb878def027fc\"],\"async\":false}\n8:I{\"id\":\"6722\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"185:app/layout-4b8fb878def027fc\"],\"async\":false}\n9:I{\"id\":\"9299\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"185:app/layout-4b8fb878def027fc\"],\"async\":false}\na:I{\"id\":\"5019\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"185:app/layout-4b8fb878def027fc\"],\"async\":false}\nb:I{\"id\":\"1300\",\"name\":\"\",\"chunks\":[\"272:webpack-e24f1f8cbee"])</script><script>self.__next_f.push([1,"90348\",\"667:2443530c-65ca4daeaf429502\",\"961:961-409d5e344dd5ce3d\"],\"async\":false}\nc:I{\"id\":\"6022\",\"name\":\"\",\"chunks\":[\"272:webpack-e24f1f8cbee90348\",\"667:2443530c-65ca4daeaf429502\",\"961:961-409d5e344dd5ce3d\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"6:[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"$L7\",null,{\"production\":true,\"goatCounterApi\":\"a7d98e3f-b56b\"}],[\"$\",\"$L8\",null,{\"id\":\"dark-theme\",\"strategy\":\"beforeInteractive\",\"children\":\"if(localStorage.theme==='Dark'||((!('theme'in localStorage)||localStorage.theme==='Auto')\u0026\u0026window.matchMedia('(prefers-color-scheme: dark)').matches)){document.documentElement.classList.add('dark')}\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-primary-50 dark:bg-primary-900\",\"children\":[\"$\",\"$L9\",null,{\"children\":[[\"$\",\"$La\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex flex-col justify-center p-6 sm:px-12 md:px-24 lg:px-48 xl:px-60 2xl:px-96\",\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"path\",\"2019-10-02_cors_laravel\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Ld\",null,null,[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/2a1840b1c557e13c.css\",\"precedence\":\"next.js\"}]]],\"segment\":\"__PAGE__?{\\\"path\\\":\\\"2019-10-02_cors_laravel\\\"}\"}}],\"segment\":[\"path\",\"2019-10-02_cors_laravel\",\"d\"]}}],\"segment\":\"posts\"}}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"5:[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"$L7\",null,{\"production\":true,\"goatCounterApi\":\"a7d98e3f-b56b\"}],[\"$\",\"$L8\",null,{\"id\":\"dark-theme\",\"strategy\":\"beforeInteractive\",\"children\":\"if(localStorage.theme==='Dark'||((!('theme'in localStorage)||localStorage.theme==='Auto')\u0026\u0026window.matchMedia('(prefers-color-scheme: dark)').matches)){document.documentElement.classList.add('dark')}\"}]]}],[\"$\",\"body\",null,{\"className\":\"bg-primary-50 dark:bg-primary-900\",\"children\":[\"$\",\"$L9\",null,{\"children\":[[\"$\",\"$La\",null,{}],[\"$\",\"main\",null,{\"className\":\"flex flex-col justify-center p-6 sm:px-12 md:px-24 lg:px-48 xl:px-60 2xl:px-96\",\"children\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"/dev/blog - /dev/blog - CORS Laravel\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"Implementation of a simple CORS middleware for Laravel Php framework\"}],[\"$\",\"meta\",null,{\"name\":\"application-name\",\"content\":\"/dev/blog\"}],null,null,[\"$\",\"meta\",null,{\"name\":\"generator\",\"content\":\"Next.js\"}],[\"$\",\"meta\",null,{\"name\":\"keywords\",\"content\":\"Dev,Blog,Programmings\"}],[\"$\",\"meta\",null,{\"name\":\"referrer\",\"content\":\"origin-when-cross-origin\"}],[[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"amber\"}]],[\"$\",\"meta\",null,{\"name\":\"color-scheme\",\"content\":\"dark\"}],[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",null,{\"name\":\"creator\",\"content\":\"Joshua Chapman\"}],null,null,null,null,null,null,null,null,null,[]],[[\"$\",\"link\",null,{\"rel\":\"canonical\",\"href\":\"https://joshuachp.dev/posts/2019-10-02_cors_laravel\"}],null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.svg\",\"type\":\"image/svg+xml\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.png\",\"type\":\"image/png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\"}]],[],null]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":\"3619\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"991:app/posts/page-2384259669d00c2b\"],\"async\":false}\nf:I{\"id\":\"7876\",\"name\":\"\",\"chunks\":[\"619:619-3a70a20416de9ff0\",\"563:app/posts/[path]/page-f449502d4ce927b8\"],\"async\":false}\n"])</script><script>self.__next_f.push([1,"d:[\"$\",\"article\",null,{\"className\":\"flex max-w-full grow flex-col justify-self-start\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl\",\"children\":[[\"$\",\"span\",\"1\",{\"children\":\"CORS Laravel\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"4\",{\"children\":\"I want to talk about the problems that I have encountered setting up CORS\"}],\"\\r\\n\",[\"$\",\"span\",\"6\",{\"children\":\"between a Laravel backend server and a simple Html frontend hosted on a\"}],\"\\r\\n\",[\"$\",\"span\",\"8\",{\"children\":\"different domain, using the fetch API.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl\",\"children\":[[\"$\",\"span\",\"11\",{\"children\":\"What is CORS\"}]]}],[\"$\",\"blockquote\",\"35\",{\"children\":[[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"strong\",\"17\",{\"children\":[[\"$\",\"span\",\"16\",{\"children\":\"Cross-Origin Resource Sharing (CORS)\"}]]}],[\"$\",\"span\",\"18\",{\"children\":\" is a mechanism that uses HTTP\"}],\"\\r\\n\",[\"$\",\"span\",\"20\",{\"children\":\"headers to tell browsers to give a web application running at one origin,\"}],\"\\r\\n\",[\"$\",\"span\",\"22\",{\"children\":\"access to selected resources from a different origin. A web application\"}],\"\\r\\n\",[\"$\",\"span\",\"24\",{\"children\":\"executes a cross-origin HTTP request when it requests a resource that has a\"}],\"\\r\\n\",[\"$\",\"span\",\"26\",{\"children\":\"different origin (domain, protocol, or port) from its own.\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[\"\u003ccite\u003e\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://developer.mozilla.org/docs/Web/HTTP/CORS\",\"children\":[[\"$\",\"span\",\"31\",{\"children\":\"MDN Web docs\"}]]}],\"\u003c/cite\u003e\"]}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"37\",{\"children\":\"An example is having a backend server in a domain different from the frontend.\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"40\",{\"children\":\"Eg. \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"example.com admin.example.com\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"44\",{\"children\":\"The browsers will block all the requests cross-domain and throw an error. This\"}],\"\\r\\n\",[\"$\",\"span\",\"46\",{\"children\":\"issue is also present in development because the server and frontend must be\"}],\"\\r\\n\",[\"$\",\"span\",\"48\",{\"children\":\"hosted on different ports (Like \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"localhost:8080\"}],[\"$\",\"span\",\"50\",{\"children\":\" and \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"localhost:8000\"}],[\"$\",\"span\",\"52\",{\"children\":\").\"}]]}],[\"$\",\"h2\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl\",\"children\":[[\"$\",\"span\",\"55\",{\"children\":\"Implementation\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"58\",{\"children\":\"The best place to read the implementation of CORS is\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://developer.mozilla.org/docs/Web/HTTP/CORS\",\"children\":[[\"$\",\"span\",\"61\",{\"children\":\"MDN Web Docs\"}]]}],[\"$\",\"span\",\"63\",{\"children\":\". Most of the\"}],\"\\r\\n\",[\"$\",\"span\",\"65\",{\"children\":\"setup on the frontend is already done by \"}],[\"$\",\"strong\",\"68\",{\"children\":[[\"$\",\"span\",\"67\",{\"children\":\"fetch\"}]]}],[\"$\",\"span\",\"69\",{\"children\":\". The first step in the CORS\"}],\"\\r\\n\",[\"$\",\"span\",\"71\",{\"children\":\"mechanism is a \"}],[\"$\",\"strong\",\"74\",{\"children\":[[\"$\",\"span\",\"73\",{\"children\":\"Preflighted request\"}]]}],[\"$\",\"span\",\"75\",{\"children\":\".\"}]]}],[\"$\",\"h3\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl\",\"children\":[[\"$\",\"span\",\"78\",{\"children\":\"Preflighted request\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"81\",{\"children\":\"The \"}],[\"$\",\"strong\",\"84\",{\"children\":[[\"$\",\"span\",\"83\",{\"children\":\"Preflighted request\"}]]}],[\"$\",\"span\",\"85\",{\"children\":\" is an \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"OPTIONS\"}],[\"$\",\"span\",\"87\",{\"children\":\" request that checks if the backend\"}],\"\\r\\n\",[\"$\",\"span\",\"89\",{\"children\":\"server understands the necessary headers.\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"92\",{\"children\":\"The headers are:\"}]]}],[\"$\",\"ul\",null,{\"className\":\"mb-4 mt-2 ml-6 text-primary-900 dark:text-primary-50 text-sm sm:text-base xl:text-lg list-disc\",\"children\":[[\"$\",\"li\",\"97\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"96\",{\"children\":\"Access-Control-Request-Method\"}]]}],[\"$\",\"li\",\"100\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"99\",{\"children\":\"Access-Control-Request-Headers\"}]]}],[\"$\",\"li\",\"103\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"102\",{\"children\":\"Origin\"}]]}]]}],[\"$\",\"h4\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-xl font-semibold tracking-tight sm:text-2xl md:text-3xl\",\"children\":[[\"$\",\"span\",\"106\",{\"children\":\"Request\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"109\",{\"children\":\"I needed to make an Ajax \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"POST\"}],[\"$\",\"span\",\"111\",{\"children\":\" request for some resources. I would send and\"}],\"\\r\\n\",[\"$\",\"span\",\"113\",{\"children\":\"receive data in json format. The preflighted request would look something like\"}],\"\\r\\n\",[\"$\",\"span\",\"115\",{\"children\":\"this:\"}]]}],[\"$\",\"$Lf\",\"119\",{\"language\":\"http\",\"className\":\"mb-4 mt-2\",\"children\":[[\"$\",\"span\",\"118\",{\"children\":\"GET /data/ HTTP/1.1\\nHost: admin.example.com\\nUser-Agent: Mozilla/5.0 (...) Gecko/20100101 Firefox\\nAccept: */*\\nAccept-Language: en-us,en;q=0.5\\nAccept-Encoding: gzip,deflate\\nConnection: keep-alive\\nOrigin: https://example.com\\n\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"121\",{\"children\":\"With the fetch API\"}]]}],[\"$\",\"$Lf\",\"125\",{\"language\":\"javascript\",\"className\":\"mb-4 mt-2\",\"children\":[[\"$\",\"span\",\"124\",{\"children\":\"fetch.ajax('admin.example.com', {\\n        method: 'POST',\\n        mode: 'cors',\\n        body: JSON.stringify({\\n            data: 'data',\\n        });\\n\"}]]}],[\"$\",\"h3\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-2xl font-bold tracking-tight sm:text-3xl md:text-4xl\",\"children\":[[\"$\",\"span\",\"127\",{\"children\":\"Laravel API\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"130\",{\"children\":\"On the API side on Laravel we need to use a Middleware to intercept the\"}],\"\\r\\n\",[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"OPTION\"}],[\"$\",\"span\",\"133\",{\"children\":\" request and add the necessary headers:\"}]]}],[\"$\",\"ul\",null,{\"className\":\"mb-4 mt-2 ml-6 text-primary-900 dark:text-primary-50 text-sm sm:text-base xl:text-lg list-disc\",\"children\":[[\"$\",\"li\",\"138\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"137\",{\"children\":\"Access-Control-Allow-Origin\"}]]}],[\"$\",\"li\",\"141\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"140\",{\"children\":\"Access-Control-Allow-Methods\"}]]}],[\"$\",\"li\",\"144\",{\"className\":\"mb-2\",\"children\":[[\"$\",\"span\",\"143\",{\"children\":\"Access-Control-Allow-Headers\"}]]}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"147\",{\"children\":\"We can do it two ways. Using a custom Middleware created on your own, for\"}],\"\\r\\n\",[\"$\",\"span\",\"149\",{\"children\":\"simple testing, or the more complete plugin\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://github.com/barryvdh/laravel-cors\",\"children\":[[\"$\",\"span\",\"152\",{\"children\":\"barryvdh/laravel-cors\"}]]}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"156\",{\"children\":\"You can find the implementation of the custom Middleware in this\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://stackoverflow.com/a/33090515\",\"children\":[[\"$\",\"span\",\"159\",{\"children\":\"Stack Overflow answer\"}]]}],[\"$\",\"span\",\"161\",{\"children\":\". The code is:\"}]]}],[\"$\",\"$Lf\",\"165\",{\"language\":\"php\",\"className\":\"mb-4 mt-2\",\"children\":[[\"$\",\"span\",\"164\",{\"children\":\"\u003c?php namespace App\\\\Http\\\\Middleware;\\n\\nuse Closure;\\n\\nclass CORS {\\n\\n    /**\\n     * Handle an incoming request.\\n     *\\n     * @param  \\\\Illuminate\\\\Http\\\\Request  $request\\n     * @param  \\\\Closure  $next\\n     * @return mixed\\n     */\\n    public function handle($request, Closure $next)\\n    {\\n\\n        header(\\\"Access-Control-Allow-Origin: *\\\");\\n\\n        // ALLOW OPTIONS METHOD\\n        $headers = [\\n            'Access-Control-Allow-Methods'=\u003e 'POST, GET, OPTIONS, PUT, DELETE',\\n            'Access-Control-Allow-Headers'=\u003e 'Content-Type, X-Auth-Token, Origin'\\n        ];\\n        if($request-\u003egetMethod() == \\\"OPTIONS\\\") {\\n            // The client-side application can set headers allowed in Access-Control-Allow-Headers\\n            return Response::make('OK', 200, $headers);\\n        }\\n\\n        $response = $next($request);\\n        foreach($headers as $key =\u003e $value)\\n            $response-\u003eheader($key, $value);\\n        return $response;\\n    }\\n}\\n\"}]]}],[\"$\",\"h2\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl\",\"children\":[[\"$\",\"span\",\"167\",{\"children\":\"Issue\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"170\",{\"children\":\"After adding the Middleware I had still issues with the browser blocking the\"}],\"\\r\\n\",[\"$\",\"span\",\"172\",{\"children\":\"request. The response to the Preflighted Request had a 200 Status Code, but no\"}],\"\\r\\n\",[\"$\",\"span\",\"174\",{\"children\":\"CORS headers. After some digging, I found out that Laravel returns an html page\"}],\"\\r\\n\",[\"$\",\"span\",\"176\",{\"children\":\"if you don\"}],[\"$\",\"span\",\"177\",{\"children\":\"’\"}],[\"$\",\"span\",\"178\",{\"children\":\"t specify a return type \"}],[\"$\",\"code\",null,{\"className\":\" items-baseline rounded bg-primary-200 p-0.5 text-sm dark:bg-primary-700 sm:p-1 sm:text-base xl:text-lg\",\"children\":\"Accept-Content: application/json\"}],[\"$\",\"span\",\"180\",{\"children\":\" in the\"}],\"\\r\\n\",[\"$\",\"span\",\"182\",{\"children\":\"request and it will result in a 302 redirect to the page which will blocked by\"}],\"\\r\\n\",[\"$\",\"span\",\"184\",{\"children\":\"default from the browser. So in the fetch function, we need to add the request\"}],\"\\r\\n\",[\"$\",\"span\",\"186\",{\"children\":\"and response content-type headers:\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"189\",{\"children\":\"With the fetch API\"}]]}],[\"$\",\"$Lf\",\"193\",{\"language\":\"javascript\",\"className\":\"mb-4 mt-2\",\"children\":[[\"$\",\"span\",\"192\",{\"children\":\"fetch.ajax(\\\"admin.example.com\\\", {\\n    method: \\\"POST\\\",\\n    mode: \\\"cors\\\",\\n    headers: {\\n        Accept: \\\"application/json\\\",\\n        \\\"Content-Type\\\": \\\"application/json\\\"\\n    },;:\\n    body: JSON.stringify({\\n        data: \\\"data\\\"\\n    })\\n});\\n\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"195\",{\"children\":\"An alternative would be to use a different package like\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://github.com/axios/axios\",\"children\":[[\"$\",\"span\",\"198\",{\"children\":\"axios\"}]]}],[\"$\",\"span\",\"200\",{\"children\":\" that automatically sets the header for\"}],\"\\r\\n\",[\"$\",\"span\",\"202\",{\"children\":\"the content-type and\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\",\"children\":[[\"$\",\"span\",\"205\",{\"children\":\"XMLHttpRequest\"}]]}],\"\\r\\n\",[\"$\",\"span\",\"208\",{\"children\":\"for Laravel to recognize the request as ajax.\"}]]}],[\"$\",\"h2\",null,{\"className\":\"mb-4 text-primary-900 dark:text-primary-50 text-3xl font-bold tracking-tight sm:text-4xl md:text-5xl\",\"children\":[[\"$\",\"span\",\"211\",{\"children\":\"Conclusion\"}]]}],[\"$\",\"p\",null,{\"className\":\"mb-2 text-sm text-primary-900 dark:text-primary-50 sm:text-base xl:text-lg\",\"children\":[[\"$\",\"span\",\"214\",{\"children\":\"In conclusion, I suggest the use of the plug-in\"}],\"\\r\\n\",[\"$\",\"$Le\",null,{\"title\":\"\",\"className\":\"font-bold text-accent-700 visited:text-accent-900 hover:underline dark:text-accent-400 dark:visited:text-accent-600\",\"href\":\"https://github.com/barryvdh/laravel-cors\",\"children\":[[\"$\",\"span\",\"217\",{\"children\":\"barryvdh/laravel-cors\"}]]}],[\"$\",\"span\",\"219\",{\"children\":\" for the best\"}],\"\\r\\n\",[\"$\",\"span\",\"221\",{\"children\":\"configuration and features.\"}]]}]]}]\n"])</script>