{"pageProps":{"article":{"title":"GPG Key Rotation","description":"Steps to safely rotate your GPG key and smartcard","tags":["security","gpg"],"date":"2023-02-10","draft":false,"language":"en","content":[{"Start":{"Heading":["H1",null,[]]}},{"Text":"GPG Key Rotation"},{"End":{"Heading":["H1",null,[]]}},{"Start":"Paragraph"},{"Text":"GPG, or Gnu Privacy Guard, is a widely-used cryptography tool for secure"},"SoftBreak",{"Text":"communication, digital signatures, and file encryption. GPG key rotation is the"},"SoftBreak",{"Text":"process of changing your primary GPG key, either for security reasons or for"},"SoftBreak",{"Text":"changing the encryption algorithm used in your key."},{"End":"Paragraph"},{"Start":"Paragraph"},{"Text":"In this article, we will go through the steps of GPG key rotation, from"},"SoftBreak",{"Text":"generating a new key to updating your configuration files and services."},{"End":"Paragraph"},{"Start":{"Heading":["H2",null,[]]}},{"Text":"Reasons for GPG Key Rotation"},{"End":{"Heading":["H2",null,[]]}},{"Start":"Paragraph"},{"Text":"There are two main reasons for changing your GPG key:"},{"End":"Paragraph"},{"Start":{"List":1}},{"Start":"Item"},{"Start":"Paragraph"},{"Text":"You want to change the GPG key algorithm: Over time, newer and stronger"},"SoftBreak",{"Text":"algorithms may become available and you may want to switch to them for"},"SoftBreak",{"Text":"better security. For example, you may want to switch from RSA to ECC"},"SoftBreak",{"Text":"(Elliptic Curve Cryptography) which is considered to be more secure and"},"SoftBreak",{"Text":"faster."},{"End":"Paragraph"},{"End":"Item"},{"Start":"Item"},{"Start":"Paragraph"},{"Text":"Your key has been compromised: If you suspect that your key has been hacked,"},"SoftBreak",{"Text":"you may want to change your key to ensure the security of your"},"SoftBreak",{"Text":"communication."},{"End":"Paragraph"},{"End":"Item"},{"End":{"List":1}},{"Start":{"Heading":["H2",null,[]]}},{"Text":"Preparation"},{"End":{"Heading":["H2",null,[]]}},{"Start":"Paragraph"},{"Text":"Before you start the GPG key rotation process, you should backup your existing"},"SoftBreak",{"Text":"key and any associated subkeys. This will allow you to restore your key if"},"SoftBreak",{"Text":"something goes wrong during the process."},{"End":"Paragraph"},{"Start":"Paragraph"},{"Text":"If you use a smartcard for key storage, you should perform the following"},"SoftBreak",{"Text":"additional steps:"},{"End":"Paragraph"},{"Start":{"List":1}},{"Start":"Item"},{"Text":"Create a temporary directory:"},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"cd $(mkdir -d)\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"End":"Item"},{"Start":"Item"},{"Text":"Create a GPG home directory:"},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"mkdir gnupg\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"End":"Item"},{"Start":"Item"},{"Text":"Export the GPG home environment variable:"},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"export GNUPGHOME=$(pwd)/gnupg\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"End":"Item"},{"Start":"Item"},{"Text":"Import the existing key backups:"},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"gpg --import private.asc\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"End":"Item"},{"End":{"List":1}},{"Start":"Paragraph"},{"Text":"This will create a place where you can generate the new keys without"},"SoftBreak",{"Text":"interfering with your existing key."},{"End":"Paragraph"},{"Start":{"Heading":["H2",null,[]]}},{"Text":"Generating a New GPG Key"},{"End":{"Heading":["H2",null,[]]}},{"Start":"Paragraph"},{"Text":"Once you have prepared your environment, you can start generating a new GPG"},"SoftBreak",{"Text":"key. Here are the steps:"},{"End":"Paragraph"},{"Start":{"List":1}},{"Start":"Item"},{"Text":"Run the following command to generate a new GPG key:"},{"End":"Item"},{"End":{"List":1}},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"gpg --full-key-generate\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"Start":{"List":2}},{"Start":"Item"},{"Text":"Select your desired algorithm, for example, ECC."},{"End":"Item"},{"Start":"Item"},{"Text":"Set an expiration date for the keys. It is recommended to set a reasonable"},"SoftBreak",{"Text":"expiration date, such as one or two years, after which you can renew the key"},"SoftBreak",{"Text":"by extending the expiration date."},{"Start":{"List":1}},{"Start":"Item"},{"Text":"Add your User IDs (UIDs) and any desired subkeys, such as an"},"SoftBreak",{"Text":"authentication key."},{"End":"Item"},{"Start":"Item"},{"Text":"Edit the key to set the trust to ultimate and use the "},{"Code":"sign <old key id>"},"SoftBreak",{"Text":"command to sign the new key. This step is crucial in the rotation"},"SoftBreak",{"Text":"process, as it will allow you to use the new key instead of the old one."},{"End":"Item"},{"End":{"List":1}},{"End":"Item"},{"End":{"List":2}},{"Start":{"Heading":["H2",null,[]]}},{"Text":"Backup and Revocation"},{"End":{"Heading":["H2",null,[]]}},{"Start":"Paragraph"},{"Text":"After you have generated the new key, you should perform the following steps to"},"SoftBreak",{"Text":"ensure the safety and continuity of your communication:"},{"End":"Paragraph"},{"Start":{"List":1}},{"Start":"Item"},{"Text":"Backup the new and old keys, along with the revocation certificates (which"},"SoftBreak",{"Text":"are automatically generated by GPG 2.1)."},{"End":"Item"},{"Start":"Item"},{"Text":"Revoke the old key and make a separate backup for the revoked key."},{"End":"Item"},{"Start":"Item"},{"Text":"Upload the new and revoked keys to the keyservers with the following"},"SoftBreak",{"Text":"command:"},{"Start":{"CodeBlock":{"Fenced":"sh"}}},{"Text":"gpg --send-keys <old> <new>\n"},{"End":{"CodeBlock":{"Fenced":"sh"}}},{"End":"Item"},{"End":{"List":1}},{"Start":"Paragraph"},{"Text":"Remember to verify any new email on the keyserver."},{"End":"Paragraph"},{"Start":{"Heading":["H2",null,[]]}},{"Text":"Conclusion"},{"End":{"Heading":["H2",null,[]]}},{"Start":"Paragraph"},{"Text":"In conclusion, rotating your GPG key can seem like a daunting task, but with"},"SoftBreak",{"Text":"these step-by-step instructions, the process is straightforward and easy to"},"SoftBreak",{"Text":"follow. Whether you want to switch to a different algorithm or your key has"},"SoftBreak",{"Text":"been compromised, these instructions will guide you through the process of"},"SoftBreak",{"Text":"creating a new key and revoking the old one. By following these steps, you can"},"SoftBreak",{"Text":"ensure that your communication remains secure and private. So, don"},{"Text":"â€™"},{"Text":"t be"},"SoftBreak",{"Text":"intimidated by the thought of key rotation and take the time to follow these"},"SoftBreak",{"Text":"steps."},{"End":"Paragraph"}]}},"__N_SSG":true}